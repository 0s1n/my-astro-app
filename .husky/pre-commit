#!/bin/bash

# Ejecutar lint:fix
pnpm run lint:fix

# Verificar si hay cambios despu√©s del lint
if [ -n "$(git diff --name-only)" ]; then
  echo "üîß Linting fixes applied. Adding changes and creating style commit..."
  
  # Obtener el mensaje del commit actual
  COMMIT_MSG=$(cat .git/COMMIT_EDITMSG 2>/dev/null || echo "code formatting")
  
  # Extraer solo la descripci√≥n del commit (sin el tipo)
  COMMIT_DESC=$(echo "$COMMIT_MSG" | sed 's/^[a-z]*[(:][^:]*[):]*[ ]*//')
  
  # Agregar los cambios del linting
  git add .
  
  # Crear commit de estilo autom√°tico
  git commit -m "style: $COMMIT_DESC"
  
  echo "‚úÖ Style commit created automatically"
fi
